{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs2/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports[\"default\"] = void 0;\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/array/is-array\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/defineProperty\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _utils = require(\"../../utils\");\n\nfunction addNameToDataURL(dataURL, name) {\n  return dataURL.replace(\";base64\", \";name=\".concat(encodeURIComponent(name), \";base64\"));\n}\n\nfunction processFile(file) {\n  var name = file.name,\n      size = file.size,\n      type = file.type;\n  return new _promise[\"default\"](function (resolve, reject) {\n    var reader = new window.FileReader();\n    reader.onerror = reject;\n\n    reader.onload = function (event) {\n      resolve({\n        dataURL: addNameToDataURL(event.target.result, name),\n        name: name,\n        size: size,\n        type: type\n      });\n    };\n\n    reader.readAsDataURL(file);\n  });\n}\n\nfunction processFiles(files) {\n  return _promise[\"default\"].all([].map.call(files, processFile));\n}\n\nfunction FilesInfo(props) {\n  var filesInfo = props.filesInfo;\n\n  if (filesInfo.length === 0) {\n    return null;\n  }\n\n  return _react[\"default\"].createElement(\"ul\", {\n    className: \"file-info\"\n  }, filesInfo.map(function (fileInfo, key) {\n    var name = fileInfo.name,\n        size = fileInfo.size,\n        type = fileInfo.type;\n    return _react[\"default\"].createElement(\"li\", {\n      key: key\n    }, _react[\"default\"].createElement(\"strong\", null, name), \" (\", type, \", \", size, \" bytes)\");\n  }));\n}\n\nfunction extractFileInfo(dataURLs) {\n  return dataURLs.filter(function (dataURL) {\n    return typeof dataURL !== \"undefined\";\n  }).map(function (dataURL) {\n    var _dataURItoBlob = (0, _utils.dataURItoBlob)(dataURL),\n        blob = _dataURItoBlob.blob,\n        name = _dataURItoBlob.name;\n\n    return {\n      name: name,\n      size: blob.size,\n      type: blob.type\n    };\n  });\n}\n\nvar FileWidget =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(FileWidget, _Component);\n\n  function FileWidget(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, FileWidget);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(FileWidget).call(this, props));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onChange\", function (event) {\n      var _this$props = _this.props,\n          multiple = _this$props.multiple,\n          onChange = _this$props.onChange;\n      processFiles(event.target.files).then(function (filesInfo) {\n        var state = {\n          values: filesInfo.map(function (fileInfo) {\n            return fileInfo.dataURL;\n          }),\n          filesInfo: filesInfo\n        };\n\n        _this.setState(state, function () {\n          if (multiple) {\n            onChange(state.values);\n          } else {\n            onChange(state.values[0]);\n          }\n        });\n      });\n    });\n    var value = props.value;\n    var values = (0, _isArray[\"default\"])(value) ? value : [value];\n    _this.state = {\n      values: values,\n      filesInfo: extractFileInfo(values)\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(FileWidget, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return (0, _utils.shouldRender)(this, nextProps, nextState);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          multiple = _this$props2.multiple,\n          id = _this$props2.id,\n          readonly = _this$props2.readonly,\n          disabled = _this$props2.disabled,\n          autofocus = _this$props2.autofocus,\n          options = _this$props2.options;\n      var filesInfo = this.state.filesInfo;\n      return _react[\"default\"].createElement(\"div\", null, _react[\"default\"].createElement(\"p\", null, _react[\"default\"].createElement(\"input\", {\n        ref: function ref(_ref) {\n          return _this2.inputRef = _ref;\n        },\n        id: id,\n        type: \"file\",\n        disabled: readonly || disabled,\n        onChange: this.onChange,\n        defaultValue: \"\",\n        autoFocus: autofocus,\n        multiple: multiple,\n        accept: options.accept\n      })), _react[\"default\"].createElement(FilesInfo, {\n        filesInfo: filesInfo\n      }));\n    }\n  }]);\n  return FileWidget;\n}(_react.Component);\n\nFileWidget.defaultProps = {\n  autofocus: false\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  FileWidget.propTypes = {\n    multiple: _propTypes[\"default\"].bool,\n    value: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].string)]),\n    autofocus: _propTypes[\"default\"].bool\n  };\n}\n\nvar _default = FileWidget;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/lucaspauker/projects/treehacks/meet/node_modules/react-jsonschema-form/lib/components/widgets/FileWidget.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","_Object$defineProperty","exports","value","_isArray","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_assertThisInitialized2","_inherits2","_defineProperty2","_promise","_react","_propTypes","_utils","addNameToDataURL","dataURL","name","replace","concat","encodeURIComponent","processFile","file","size","type","resolve","reject","reader","window","FileReader","onerror","onload","event","target","result","readAsDataURL","processFiles","files","all","map","call","FilesInfo","props","filesInfo","length","createElement","className","fileInfo","key","extractFileInfo","dataURLs","filter","_dataURItoBlob","dataURItoBlob","blob","FileWidget","_Component","_this","_this$props","multiple","onChange","then","state","values","setState","shouldComponentUpdate","nextProps","nextState","shouldRender","render","_this2","_this$props2","id","readonly","disabled","autofocus","options","ref","_ref","inputRef","defaultValue","autoFocus","accept","Component","defaultProps","process","env","NODE_ENV","propTypes","bool","oneOfType","string","arrayOf","_default"],"mappings":"AAAA;;AAEA,IAAIA,uBAAuB,GAAGC,OAAO,CAAC,uDAAD,CAArC;;AAEA,IAAIC,sBAAsB,GAAGD,OAAO,CAAC,sDAAD,CAApC;;AAEA,IAAIE,sBAAsB,GAAGF,OAAO,CAAC,uDAAD,CAApC;;AAEAE,sBAAsB,CAACC,OAAD,EAAU,YAAV,EAAwB;AAC5CC,EAAAA,KAAK,EAAE;AADqC,CAAxB,CAAtB;;AAIAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,QAAQ,GAAGJ,sBAAsB,CAACD,OAAO,CAAC,+CAAD,CAAR,CAArC;;AAEA,IAAIM,gBAAgB,GAAGL,sBAAsB,CAACD,OAAO,CAAC,+CAAD,CAAR,CAA7C;;AAEA,IAAIO,aAAa,GAAGN,sBAAsB,CAACD,OAAO,CAAC,4CAAD,CAAR,CAA1C;;AAEA,IAAIQ,2BAA2B,GAAGP,sBAAsB,CAACD,OAAO,CAAC,0DAAD,CAAR,CAAxD;;AAEA,IAAIS,gBAAgB,GAAGR,sBAAsB,CAACD,OAAO,CAAC,+CAAD,CAAR,CAA7C;;AAEA,IAAIU,uBAAuB,GAAGT,sBAAsB,CAACD,OAAO,CAAC,sDAAD,CAAR,CAApD;;AAEA,IAAIW,UAAU,GAAGV,sBAAsB,CAACD,OAAO,CAAC,yCAAD,CAAR,CAAvC;;AAEA,IAAIY,gBAAgB,GAAGX,sBAAsB,CAACD,OAAO,CAAC,+CAAD,CAAR,CAA7C;;AAEA,IAAIa,QAAQ,GAAGZ,sBAAsB,CAACD,OAAO,CAAC,wCAAD,CAAR,CAArC;;AAEA,IAAIc,MAAM,GAAGf,uBAAuB,CAACC,OAAO,CAAC,OAAD,CAAR,CAApC;;AAEA,IAAIe,UAAU,GAAGd,sBAAsB,CAACD,OAAO,CAAC,YAAD,CAAR,CAAvC;;AAEA,IAAIgB,MAAM,GAAGhB,OAAO,CAAC,aAAD,CAApB;;AAEA,SAASiB,gBAAT,CAA0BC,OAA1B,EAAmCC,IAAnC,EAAyC;AACvC,SAAOD,OAAO,CAACE,OAAR,CAAgB,SAAhB,EAA2B,SAASC,MAAT,CAAgBC,kBAAkB,CAACH,IAAD,CAAlC,EAA0C,SAA1C,CAA3B,CAAP;AACD;;AAED,SAASI,WAAT,CAAqBC,IAArB,EAA2B;AACzB,MAAIL,IAAI,GAAGK,IAAI,CAACL,IAAhB;AAAA,MACIM,IAAI,GAAGD,IAAI,CAACC,IADhB;AAAA,MAEIC,IAAI,GAAGF,IAAI,CAACE,IAFhB;AAGA,SAAO,IAAIb,QAAQ,CAAC,SAAD,CAAZ,CAAwB,UAAUc,OAAV,EAAmBC,MAAnB,EAA2B;AACxD,QAAIC,MAAM,GAAG,IAAIC,MAAM,CAACC,UAAX,EAAb;AACAF,IAAAA,MAAM,CAACG,OAAP,GAAiBJ,MAAjB;;AAEAC,IAAAA,MAAM,CAACI,MAAP,GAAgB,UAAUC,KAAV,EAAiB;AAC/BP,MAAAA,OAAO,CAAC;AACNT,QAAAA,OAAO,EAAED,gBAAgB,CAACiB,KAAK,CAACC,MAAN,CAAaC,MAAd,EAAsBjB,IAAtB,CADnB;AAENA,QAAAA,IAAI,EAAEA,IAFA;AAGNM,QAAAA,IAAI,EAAEA,IAHA;AAINC,QAAAA,IAAI,EAAEA;AAJA,OAAD,CAAP;AAMD,KAPD;;AASAG,IAAAA,MAAM,CAACQ,aAAP,CAAqBb,IAArB;AACD,GAdM,CAAP;AAeD;;AAED,SAASc,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,SAAO1B,QAAQ,CAAC,SAAD,CAAR,CAAoB2B,GAApB,CAAwB,GAAGC,GAAH,CAAOC,IAAP,CAAYH,KAAZ,EAAmBhB,WAAnB,CAAxB,CAAP;AACD;;AAED,SAASoB,SAAT,CAAmBC,KAAnB,EAA0B;AACxB,MAAIC,SAAS,GAAGD,KAAK,CAACC,SAAtB;;AAEA,MAAIA,SAAS,CAACC,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,WAAO,IAAP;AACD;;AAED,SAAOhC,MAAM,CAAC,SAAD,CAAN,CAAkBiC,aAAlB,CAAgC,IAAhC,EAAsC;AAC3CC,IAAAA,SAAS,EAAE;AADgC,GAAtC,EAEJH,SAAS,CAACJ,GAAV,CAAc,UAAUQ,QAAV,EAAoBC,GAApB,EAAyB;AACxC,QAAI/B,IAAI,GAAG8B,QAAQ,CAAC9B,IAApB;AAAA,QACIM,IAAI,GAAGwB,QAAQ,CAACxB,IADpB;AAAA,QAEIC,IAAI,GAAGuB,QAAQ,CAACvB,IAFpB;AAGA,WAAOZ,MAAM,CAAC,SAAD,CAAN,CAAkBiC,aAAlB,CAAgC,IAAhC,EAAsC;AAC3CG,MAAAA,GAAG,EAAEA;AADsC,KAAtC,EAEJpC,MAAM,CAAC,SAAD,CAAN,CAAkBiC,aAAlB,CAAgC,QAAhC,EAA0C,IAA1C,EAAgD5B,IAAhD,CAFI,EAEmD,IAFnD,EAEyDO,IAFzD,EAE+D,IAF/D,EAEqED,IAFrE,EAE2E,SAF3E,CAAP;AAGD,GAPE,CAFI,CAAP;AAUD;;AAED,SAAS0B,eAAT,CAAyBC,QAAzB,EAAmC;AACjC,SAAOA,QAAQ,CAACC,MAAT,CAAgB,UAAUnC,OAAV,EAAmB;AACxC,WAAO,OAAOA,OAAP,KAAmB,WAA1B;AACD,GAFM,EAEJuB,GAFI,CAEA,UAAUvB,OAAV,EAAmB;AACxB,QAAIoC,cAAc,GAAG,CAAC,GAAGtC,MAAM,CAACuC,aAAX,EAA0BrC,OAA1B,CAArB;AAAA,QACIsC,IAAI,GAAGF,cAAc,CAACE,IAD1B;AAAA,QAEIrC,IAAI,GAAGmC,cAAc,CAACnC,IAF1B;;AAIA,WAAO;AACLA,MAAAA,IAAI,EAAEA,IADD;AAELM,MAAAA,IAAI,EAAE+B,IAAI,CAAC/B,IAFN;AAGLC,MAAAA,IAAI,EAAE8B,IAAI,CAAC9B;AAHN,KAAP;AAKD,GAZM,CAAP;AAaD;;AAED,IAAI+B,UAAU;AACd;AACA,UAAUC,UAAV,EAAsB;AACpB,GAAC,GAAG/C,UAAU,CAAC,SAAD,CAAd,EAA2B8C,UAA3B,EAAuCC,UAAvC;;AAEA,WAASD,UAAT,CAAoBb,KAApB,EAA2B;AACzB,QAAIe,KAAJ;;AAEA,KAAC,GAAGrD,gBAAgB,CAAC,SAAD,CAApB,EAAiC,IAAjC,EAAuCmD,UAAvC;AACAE,IAAAA,KAAK,GAAG,CAAC,GAAGnD,2BAA2B,CAAC,SAAD,CAA/B,EAA4C,IAA5C,EAAkD,CAAC,GAAGC,gBAAgB,CAAC,SAAD,CAApB,EAAiCgD,UAAjC,EAA6Cf,IAA7C,CAAkD,IAAlD,EAAwDE,KAAxD,CAAlD,CAAR;AACA,KAAC,GAAGhC,gBAAgB,CAAC,SAAD,CAApB,EAAiC,CAAC,GAAGF,uBAAuB,CAAC,SAAD,CAA3B,EAAwCiD,KAAxC,CAAjC,EAAiF,UAAjF,EAA6F,UAAUzB,KAAV,EAAiB;AAC5G,UAAI0B,WAAW,GAAGD,KAAK,CAACf,KAAxB;AAAA,UACIiB,QAAQ,GAAGD,WAAW,CAACC,QAD3B;AAAA,UAEIC,QAAQ,GAAGF,WAAW,CAACE,QAF3B;AAGAxB,MAAAA,YAAY,CAACJ,KAAK,CAACC,MAAN,CAAaI,KAAd,CAAZ,CAAiCwB,IAAjC,CAAsC,UAAUlB,SAAV,EAAqB;AACzD,YAAImB,KAAK,GAAG;AACVC,UAAAA,MAAM,EAAEpB,SAAS,CAACJ,GAAV,CAAc,UAAUQ,QAAV,EAAoB;AACxC,mBAAOA,QAAQ,CAAC/B,OAAhB;AACD,WAFO,CADE;AAIV2B,UAAAA,SAAS,EAAEA;AAJD,SAAZ;;AAOAc,QAAAA,KAAK,CAACO,QAAN,CAAeF,KAAf,EAAsB,YAAY;AAChC,cAAIH,QAAJ,EAAc;AACZC,YAAAA,QAAQ,CAACE,KAAK,CAACC,MAAP,CAAR;AACD,WAFD,MAEO;AACLH,YAAAA,QAAQ,CAACE,KAAK,CAACC,MAAN,CAAa,CAAb,CAAD,CAAR;AACD;AACF,SAND;AAOD,OAfD;AAgBD,KApBD;AAqBA,QAAI7D,KAAK,GAAGwC,KAAK,CAACxC,KAAlB;AACA,QAAI6D,MAAM,GAAG,CAAC,GAAG5D,QAAQ,CAAC,SAAD,CAAZ,EAAyBD,KAAzB,IAAkCA,KAAlC,GAA0C,CAACA,KAAD,CAAvD;AACAuD,IAAAA,KAAK,CAACK,KAAN,GAAc;AACZC,MAAAA,MAAM,EAAEA,MADI;AAEZpB,MAAAA,SAAS,EAAEM,eAAe,CAACc,MAAD;AAFd,KAAd;AAIA,WAAON,KAAP;AACD;;AAED,GAAC,GAAGpD,aAAa,CAAC,SAAD,CAAjB,EAA8BkD,UAA9B,EAA0C,CAAC;AACzCP,IAAAA,GAAG,EAAE,uBADoC;AAEzC9C,IAAAA,KAAK,EAAE,SAAS+D,qBAAT,CAA+BC,SAA/B,EAA0CC,SAA1C,EAAqD;AAC1D,aAAO,CAAC,GAAGrD,MAAM,CAACsD,YAAX,EAAyB,IAAzB,EAA+BF,SAA/B,EAA0CC,SAA1C,CAAP;AACD;AAJwC,GAAD,EAKvC;AACDnB,IAAAA,GAAG,EAAE,QADJ;AAED9C,IAAAA,KAAK,EAAE,SAASmE,MAAT,GAAkB;AACvB,UAAIC,MAAM,GAAG,IAAb;;AAEA,UAAIC,YAAY,GAAG,KAAK7B,KAAxB;AAAA,UACIiB,QAAQ,GAAGY,YAAY,CAACZ,QAD5B;AAAA,UAEIa,EAAE,GAAGD,YAAY,CAACC,EAFtB;AAAA,UAGIC,QAAQ,GAAGF,YAAY,CAACE,QAH5B;AAAA,UAIIC,QAAQ,GAAGH,YAAY,CAACG,QAJ5B;AAAA,UAKIC,SAAS,GAAGJ,YAAY,CAACI,SAL7B;AAAA,UAMIC,OAAO,GAAGL,YAAY,CAACK,OAN3B;AAOA,UAAIjC,SAAS,GAAG,KAAKmB,KAAL,CAAWnB,SAA3B;AACA,aAAO/B,MAAM,CAAC,SAAD,CAAN,CAAkBiC,aAAlB,CAAgC,KAAhC,EAAuC,IAAvC,EAA6CjC,MAAM,CAAC,SAAD,CAAN,CAAkBiC,aAAlB,CAAgC,GAAhC,EAAqC,IAArC,EAA2CjC,MAAM,CAAC,SAAD,CAAN,CAAkBiC,aAAlB,CAAgC,OAAhC,EAAyC;AACtIgC,QAAAA,GAAG,EAAE,SAASA,GAAT,CAAaC,IAAb,EAAmB;AACtB,iBAAOR,MAAM,CAACS,QAAP,GAAkBD,IAAzB;AACD,SAHqI;AAItIN,QAAAA,EAAE,EAAEA,EAJkI;AAKtIhD,QAAAA,IAAI,EAAE,MALgI;AAMtIkD,QAAAA,QAAQ,EAAED,QAAQ,IAAIC,QANgH;AAOtId,QAAAA,QAAQ,EAAE,KAAKA,QAPuH;AAQtIoB,QAAAA,YAAY,EAAE,EARwH;AAStIC,QAAAA,SAAS,EAAEN,SAT2H;AAUtIhB,QAAAA,QAAQ,EAAEA,QAV4H;AAWtIuB,QAAAA,MAAM,EAAEN,OAAO,CAACM;AAXsH,OAAzC,CAA3C,CAA7C,EAYFtE,MAAM,CAAC,SAAD,CAAN,CAAkBiC,aAAlB,CAAgCJ,SAAhC,EAA2C;AAC9CE,QAAAA,SAAS,EAAEA;AADmC,OAA3C,CAZE,CAAP;AAeD;AA5BA,GALuC,CAA1C;AAmCA,SAAOY,UAAP;AACD,CA1ED,CA0EE3C,MAAM,CAACuE,SA1ET,CAFA;;AA8EA5B,UAAU,CAAC6B,YAAX,GAA0B;AACxBT,EAAAA,SAAS,EAAE;AADa,CAA1B;;AAIA,IAAIU,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzChC,EAAAA,UAAU,CAACiC,SAAX,GAAuB;AACrB7B,IAAAA,QAAQ,EAAE9C,UAAU,CAAC,SAAD,CAAV,CAAsB4E,IADX;AAErBvF,IAAAA,KAAK,EAAEW,UAAU,CAAC,SAAD,CAAV,CAAsB6E,SAAtB,CAAgC,CAAC7E,UAAU,CAAC,SAAD,CAAV,CAAsB8E,MAAvB,EAA+B9E,UAAU,CAAC,SAAD,CAAV,CAAsB+E,OAAtB,CAA8B/E,UAAU,CAAC,SAAD,CAAV,CAAsB8E,MAApD,CAA/B,CAAhC,CAFc;AAGrBhB,IAAAA,SAAS,EAAE9D,UAAU,CAAC,SAAD,CAAV,CAAsB4E;AAHZ,GAAvB;AAKD;;AAED,IAAII,QAAQ,GAAGtC,UAAf;AACAtD,OAAO,CAAC,SAAD,CAAP,GAAqB4F,QAArB","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs2/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports[\"default\"] = void 0;\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/array/is-array\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/defineProperty\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _utils = require(\"../../utils\");\n\nfunction addNameToDataURL(dataURL, name) {\n  return dataURL.replace(\";base64\", \";name=\".concat(encodeURIComponent(name), \";base64\"));\n}\n\nfunction processFile(file) {\n  var name = file.name,\n      size = file.size,\n      type = file.type;\n  return new _promise[\"default\"](function (resolve, reject) {\n    var reader = new window.FileReader();\n    reader.onerror = reject;\n\n    reader.onload = function (event) {\n      resolve({\n        dataURL: addNameToDataURL(event.target.result, name),\n        name: name,\n        size: size,\n        type: type\n      });\n    };\n\n    reader.readAsDataURL(file);\n  });\n}\n\nfunction processFiles(files) {\n  return _promise[\"default\"].all([].map.call(files, processFile));\n}\n\nfunction FilesInfo(props) {\n  var filesInfo = props.filesInfo;\n\n  if (filesInfo.length === 0) {\n    return null;\n  }\n\n  return _react[\"default\"].createElement(\"ul\", {\n    className: \"file-info\"\n  }, filesInfo.map(function (fileInfo, key) {\n    var name = fileInfo.name,\n        size = fileInfo.size,\n        type = fileInfo.type;\n    return _react[\"default\"].createElement(\"li\", {\n      key: key\n    }, _react[\"default\"].createElement(\"strong\", null, name), \" (\", type, \", \", size, \" bytes)\");\n  }));\n}\n\nfunction extractFileInfo(dataURLs) {\n  return dataURLs.filter(function (dataURL) {\n    return typeof dataURL !== \"undefined\";\n  }).map(function (dataURL) {\n    var _dataURItoBlob = (0, _utils.dataURItoBlob)(dataURL),\n        blob = _dataURItoBlob.blob,\n        name = _dataURItoBlob.name;\n\n    return {\n      name: name,\n      size: blob.size,\n      type: blob.type\n    };\n  });\n}\n\nvar FileWidget =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(FileWidget, _Component);\n\n  function FileWidget(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, FileWidget);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(FileWidget).call(this, props));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onChange\", function (event) {\n      var _this$props = _this.props,\n          multiple = _this$props.multiple,\n          onChange = _this$props.onChange;\n      processFiles(event.target.files).then(function (filesInfo) {\n        var state = {\n          values: filesInfo.map(function (fileInfo) {\n            return fileInfo.dataURL;\n          }),\n          filesInfo: filesInfo\n        };\n\n        _this.setState(state, function () {\n          if (multiple) {\n            onChange(state.values);\n          } else {\n            onChange(state.values[0]);\n          }\n        });\n      });\n    });\n    var value = props.value;\n    var values = (0, _isArray[\"default\"])(value) ? value : [value];\n    _this.state = {\n      values: values,\n      filesInfo: extractFileInfo(values)\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(FileWidget, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return (0, _utils.shouldRender)(this, nextProps, nextState);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          multiple = _this$props2.multiple,\n          id = _this$props2.id,\n          readonly = _this$props2.readonly,\n          disabled = _this$props2.disabled,\n          autofocus = _this$props2.autofocus,\n          options = _this$props2.options;\n      var filesInfo = this.state.filesInfo;\n      return _react[\"default\"].createElement(\"div\", null, _react[\"default\"].createElement(\"p\", null, _react[\"default\"].createElement(\"input\", {\n        ref: function ref(_ref) {\n          return _this2.inputRef = _ref;\n        },\n        id: id,\n        type: \"file\",\n        disabled: readonly || disabled,\n        onChange: this.onChange,\n        defaultValue: \"\",\n        autoFocus: autofocus,\n        multiple: multiple,\n        accept: options.accept\n      })), _react[\"default\"].createElement(FilesInfo, {\n        filesInfo: filesInfo\n      }));\n    }\n  }]);\n  return FileWidget;\n}(_react.Component);\n\nFileWidget.defaultProps = {\n  autofocus: false\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  FileWidget.propTypes = {\n    multiple: _propTypes[\"default\"].bool,\n    value: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].string)]),\n    autofocus: _propTypes[\"default\"].bool\n  };\n}\n\nvar _default = FileWidget;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}