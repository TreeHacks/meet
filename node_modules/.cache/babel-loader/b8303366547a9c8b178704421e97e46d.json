{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs2/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports[\"default\"] = void 0;\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/keys\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/objectWithoutProperties\"));\n\nvar _objectSpread3 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/objectSpread\"));\n\nvar _parseInt2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/parse-int\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/defineProperty\"));\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/array/is-array\"));\n\nvar _AddButton = _interopRequireDefault(require(\"../AddButton\"));\n\nvar _IconButton = _interopRequireDefault(require(\"../IconButton\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nvar _includes = _interopRequireDefault(require(\"core-js/library/fn/array/includes\"));\n\nvar types = _interopRequireWildcard(require(\"../../types\"));\n\nvar _UnsupportedField = _interopRequireDefault(require(\"./UnsupportedField\"));\n\nvar _utils = require(\"../../utils\");\n\nvar _shortid = _interopRequireDefault(require(\"shortid\"));\n\nfunction ArrayFieldTitle(_ref) {\n  var TitleField = _ref.TitleField,\n      idSchema = _ref.idSchema,\n      title = _ref.title,\n      required = _ref.required;\n\n  if (!title) {\n    return null;\n  }\n\n  var id = \"\".concat(idSchema.$id, \"__title\");\n  return _react[\"default\"].createElement(TitleField, {\n    id: id,\n    title: title,\n    required: required\n  });\n}\n\nfunction ArrayFieldDescription(_ref2) {\n  var DescriptionField = _ref2.DescriptionField,\n      idSchema = _ref2.idSchema,\n      description = _ref2.description;\n\n  if (!description) {\n    return null;\n  }\n\n  var id = \"\".concat(idSchema.$id, \"__description\");\n  return _react[\"default\"].createElement(DescriptionField, {\n    id: id,\n    description: description\n  });\n} // Used in the two templates\n\n\nfunction DefaultArrayItem(props) {\n  var btnStyle = {\n    flex: 1,\n    paddingLeft: 6,\n    paddingRight: 6,\n    fontWeight: \"bold\"\n  };\n  return _react[\"default\"].createElement(\"div\", {\n    key: props.key,\n    className: props.className\n  }, _react[\"default\"].createElement(\"div\", {\n    className: props.hasToolbar ? \"col-xs-9\" : \"col-xs-12\"\n  }, props.children), props.hasToolbar && _react[\"default\"].createElement(\"div\", {\n    className: \"col-xs-3 array-item-toolbox\"\n  }, _react[\"default\"].createElement(\"div\", {\n    className: \"btn-group\",\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-around\"\n    }\n  }, (props.hasMoveUp || props.hasMoveDown) && _react[\"default\"].createElement(_IconButton[\"default\"], {\n    icon: \"arrow-up\",\n    className: \"array-item-move-up\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly || !props.hasMoveUp,\n    onClick: props.onReorderClick(props.index, props.index - 1)\n  }), (props.hasMoveUp || props.hasMoveDown) && _react[\"default\"].createElement(_IconButton[\"default\"], {\n    icon: \"arrow-down\",\n    className: \"array-item-move-down\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly || !props.hasMoveDown,\n    onClick: props.onReorderClick(props.index, props.index + 1)\n  }), props.hasRemove && _react[\"default\"].createElement(_IconButton[\"default\"], {\n    type: \"danger\",\n    icon: \"remove\",\n    className: \"array-item-remove\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly,\n    onClick: props.onDropIndexClick(props.index)\n  }))));\n}\n\nfunction DefaultFixedArrayFieldTemplate(props) {\n  return _react[\"default\"].createElement(\"fieldset\", {\n    className: props.className,\n    id: props.idSchema.$id\n  }, _react[\"default\"].createElement(ArrayFieldTitle, {\n    key: \"array-field-title-\".concat(props.idSchema.$id),\n    TitleField: props.TitleField,\n    idSchema: props.idSchema,\n    title: props.uiSchema[\"ui:title\"] || props.title,\n    required: props.required\n  }), (props.uiSchema[\"ui:description\"] || props.schema.description) && _react[\"default\"].createElement(\"div\", {\n    className: \"field-description\",\n    key: \"field-description-\".concat(props.idSchema.$id)\n  }, props.uiSchema[\"ui:description\"] || props.schema.description), _react[\"default\"].createElement(\"div\", {\n    className: \"row array-item-list\",\n    key: \"array-item-list-\".concat(props.idSchema.$id)\n  }, props.items && props.items.map(DefaultArrayItem)), props.canAdd && _react[\"default\"].createElement(_AddButton[\"default\"], {\n    className: \"array-item-add\",\n    onClick: props.onAddClick,\n    disabled: props.disabled || props.readonly\n  }));\n}\n\nfunction DefaultNormalArrayFieldTemplate(props) {\n  return _react[\"default\"].createElement(\"fieldset\", {\n    className: props.className,\n    id: props.idSchema.$id\n  }, _react[\"default\"].createElement(ArrayFieldTitle, {\n    key: \"array-field-title-\".concat(props.idSchema.$id),\n    TitleField: props.TitleField,\n    idSchema: props.idSchema,\n    title: props.uiSchema[\"ui:title\"] || props.title,\n    required: props.required\n  }), (props.uiSchema[\"ui:description\"] || props.schema.description) && _react[\"default\"].createElement(ArrayFieldDescription, {\n    key: \"array-field-description-\".concat(props.idSchema.$id),\n    DescriptionField: props.DescriptionField,\n    idSchema: props.idSchema,\n    description: props.uiSchema[\"ui:description\"] || props.schema.description\n  }), _react[\"default\"].createElement(\"div\", {\n    className: \"row array-item-list\",\n    key: \"array-item-list-\".concat(props.idSchema.$id)\n  }, props.items && props.items.map(function (p) {\n    return DefaultArrayItem(p);\n  })), props.canAdd && _react[\"default\"].createElement(_AddButton[\"default\"], {\n    className: \"array-item-add\",\n    onClick: props.onAddClick,\n    disabled: props.disabled || props.readonly\n  }));\n}\n\nfunction generateRowId() {\n  return _shortid[\"default\"].generate();\n}\n\nfunction generateKeyedFormData(formData) {\n  return !(0, _isArray[\"default\"])(formData) ? [] : formData.map(function (item) {\n    return {\n      key: generateRowId(),\n      item: item\n    };\n  });\n}\n\nfunction keyedToPlainFormData(keyedFormData) {\n  return keyedFormData.map(function (keyedItem) {\n    return keyedItem.item;\n  });\n}\n\nvar ArrayField =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(ArrayField, _Component);\n\n  function ArrayField(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, ArrayField);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(ArrayField).call(this, props));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_getNewFormDataRow\", function () {\n      var _this$props = _this.props,\n          schema = _this$props.schema,\n          _this$props$registry = _this$props.registry,\n          registry = _this$props$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props$registry;\n      var definitions = registry.definitions;\n      var itemSchema = schema.items;\n\n      if ((0, _utils.isFixedItems)(schema) && (0, _utils.allowAdditionalItems)(schema)) {\n        itemSchema = schema.additionalItems;\n      }\n\n      return (0, _utils.getDefaultFormState)(itemSchema, undefined, definitions);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onAddClick\", function (event) {\n      event.preventDefault();\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow()\n      };\n      var newKeyedFormData = [].concat((0, _toConsumableArray2[\"default\"])(_this.state.keyedFormData), [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onAddIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var newKeyedFormDataRow = {\n          key: generateRowId(),\n          item: _this._getNewFormDataRow()\n        };\n        var newKeyedFormData = (0, _toConsumableArray2[\"default\"])(_this.state.keyedFormData);\n        newKeyedFormData.splice(index, 0, newKeyedFormDataRow);\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData));\n        });\n      };\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onDropIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var keyedFormData = _this.state.keyedFormData; // refs #195: revalidate to ensure properly reindexing errors\n\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            i = (0, _parseInt2[\"default\"])(i);\n\n            if (i < index) {\n              newErrorSchema[i] = errorSchema[i];\n            } else if (i > index) {\n              newErrorSchema[i - 1] = errorSchema[i];\n            }\n          }\n        }\n\n        var newKeyedFormData = keyedFormData.filter(function (_, i) {\n          return i !== index;\n        });\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onReorderClick\", function (index, newIndex) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n          event.target.blur();\n        }\n\n        var onChange = _this.props.onChange;\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            if (i == index) {\n              newErrorSchema[newIndex] = errorSchema[index];\n            } else if (i == newIndex) {\n              newErrorSchema[index] = errorSchema[newIndex];\n            } else {\n              newErrorSchema[i] = errorSchema[i];\n            }\n          }\n        }\n\n        var keyedFormData = _this.state.keyedFormData;\n\n        function reOrderArray() {\n          // Copy item\n          var _newKeyedFormData = keyedFormData.slice(); // Moves item from index to newIndex\n\n\n          _newKeyedFormData.splice(index, 1);\n\n          _newKeyedFormData.splice(newIndex, 0, keyedFormData[index]);\n\n          return _newKeyedFormData;\n        }\n\n        var newKeyedFormData = reOrderArray();\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onChangeForIndex\", function (index) {\n      return function (value, errorSchema) {\n        var _this$props2 = _this.props,\n            formData = _this$props2.formData,\n            onChange = _this$props2.onChange;\n        var newFormData = formData.map(function (item, i) {\n          // We need to treat undefined items as nulls to have validation.\n          // See https://github.com/tdegrunt/jsonschema/issues/206\n          var jsonValue = typeof value === \"undefined\" ? null : value;\n          return index === i ? jsonValue : item;\n        });\n        onChange(newFormData, errorSchema && _this.props.errorSchema && (0, _objectSpread3[\"default\"])({}, _this.props.errorSchema, (0, _defineProperty2[\"default\"])({}, index, errorSchema)));\n      };\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onSelectChange\", function (value) {\n      _this.props.onChange(value);\n    });\n    var _formData = props.formData;\n\n    var _keyedFormData = generateKeyedFormData(_formData);\n\n    _this.state = {\n      keyedFormData: _keyedFormData\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ArrayField, [{\n    key: \"isItemRequired\",\n    value: function isItemRequired(itemSchema) {\n      if ((0, _isArray[\"default\"])(itemSchema.type)) {\n        // While we don't yet support composite/nullable jsonschema types, it's\n        // future-proof to check for requirement against these.\n        return !(0, _includes[\"default\"])(itemSchema.type, \"null\");\n      } // All non-null array item types are inherently required by design\n\n\n      return itemSchema.type !== \"null\";\n    }\n  }, {\n    key: \"canAddItem\",\n    value: function canAddItem(formItems) {\n      var _this$props3 = this.props,\n          schema = _this$props3.schema,\n          uiSchema = _this$props3.uiSchema;\n\n      var _getUiOptions = (0, _utils.getUiOptions)(uiSchema),\n          addable = _getUiOptions.addable;\n\n      if (addable !== false) {\n        // if ui:options.addable was not explicitly set to false, we can add\n        // another item if we have not exceeded maxItems yet\n        if (schema.maxItems !== undefined) {\n          addable = formItems.length < schema.maxItems;\n        } else {\n          addable = true;\n        }\n      }\n\n      return addable;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          schema = _this$props4.schema,\n          uiSchema = _this$props4.uiSchema,\n          idSchema = _this$props4.idSchema,\n          _this$props4$registry = _this$props4.registry,\n          registry = _this$props4$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props4$registry;\n      var definitions = registry.definitions;\n\n      if (!schema.hasOwnProperty(\"items\")) {\n        return _react[\"default\"].createElement(_UnsupportedField[\"default\"], {\n          schema: schema,\n          idSchema: idSchema,\n          reason: \"Missing items definition\"\n        });\n      }\n\n      if ((0, _utils.isFixedItems)(schema)) {\n        return this.renderFixedArray();\n      }\n\n      if ((0, _utils.isFilesArray)(schema, uiSchema, definitions)) {\n        return this.renderFiles();\n      }\n\n      if ((0, _utils.isMultiSelect)(schema, definitions)) {\n        return this.renderMultiSelect();\n      }\n\n      return this.renderNormalArray();\n    }\n  }, {\n    key: \"renderNormalArray\",\n    value: function renderNormalArray() {\n      var _this2 = this;\n\n      var _this$props5 = this.props,\n          schema = _this$props5.schema,\n          uiSchema = _this$props5.uiSchema,\n          formData = _this$props5.formData,\n          errorSchema = _this$props5.errorSchema,\n          idSchema = _this$props5.idSchema,\n          name = _this$props5.name,\n          required = _this$props5.required,\n          disabled = _this$props5.disabled,\n          readonly = _this$props5.readonly,\n          autofocus = _this$props5.autofocus,\n          _this$props5$registry = _this$props5.registry,\n          registry = _this$props5$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props5$registry,\n          onBlur = _this$props5.onBlur,\n          onFocus = _this$props5.onFocus,\n          idPrefix = _this$props5.idPrefix,\n          rawErrors = _this$props5.rawErrors;\n      var title = schema.title === undefined ? name : schema.title;\n      var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n          definitions = registry.definitions,\n          fields = registry.fields,\n          formContext = registry.formContext;\n      var TitleField = fields.TitleField,\n          DescriptionField = fields.DescriptionField;\n      var itemsSchema = (0, _utils.retrieveSchema)(schema.items, definitions);\n      var arrayProps = {\n        canAdd: this.canAddItem(formData),\n        items: this.state.keyedFormData.map(function (keyedItem, index) {\n          var key = keyedItem.key,\n              item = keyedItem.item;\n          var itemSchema = (0, _utils.retrieveSchema)(schema.items, definitions, item);\n          var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n          var itemIdPrefix = idSchema.$id + \"_\" + index;\n          var itemIdSchema = (0, _utils.toIdSchema)(itemSchema, itemIdPrefix, definitions, item, idPrefix);\n          return _this2.renderArrayFieldItem({\n            key: key,\n            index: index,\n            canMoveUp: index > 0,\n            canMoveDown: index < formData.length - 1,\n            itemSchema: itemSchema,\n            itemIdSchema: itemIdSchema,\n            itemErrorSchema: itemErrorSchema,\n            itemData: item,\n            itemUiSchema: uiSchema.items,\n            autofocus: autofocus && index === 0,\n            onBlur: onBlur,\n            onFocus: onFocus\n          });\n        }),\n        className: \"field field-array field-array-of-\".concat(itemsSchema.type),\n        DescriptionField: DescriptionField,\n        disabled: disabled,\n        idSchema: idSchema,\n        uiSchema: uiSchema,\n        onAddClick: this.onAddClick,\n        readonly: readonly,\n        required: required,\n        schema: schema,\n        title: title,\n        TitleField: TitleField,\n        formContext: formContext,\n        formData: formData,\n        rawErrors: rawErrors,\n        registry: registry\n      }; // Check if a custom render function was passed in\n\n      var Component = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultNormalArrayFieldTemplate;\n      return _react[\"default\"].createElement(Component, arrayProps);\n    }\n  }, {\n    key: \"renderMultiSelect\",\n    value: function renderMultiSelect() {\n      var _this$props6 = this.props,\n          schema = _this$props6.schema,\n          idSchema = _this$props6.idSchema,\n          uiSchema = _this$props6.uiSchema,\n          formData = _this$props6.formData,\n          disabled = _this$props6.disabled,\n          readonly = _this$props6.readonly,\n          required = _this$props6.required,\n          label = _this$props6.label,\n          placeholder = _this$props6.placeholder,\n          autofocus = _this$props6.autofocus,\n          onBlur = _this$props6.onBlur,\n          onFocus = _this$props6.onFocus,\n          _this$props6$registry = _this$props6.registry,\n          registry = _this$props6$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props6$registry,\n          rawErrors = _this$props6.rawErrors;\n      var items = this.props.formData;\n      var widgets = registry.widgets,\n          definitions = registry.definitions,\n          formContext = registry.formContext;\n      var itemsSchema = (0, _utils.retrieveSchema)(schema.items, definitions, formData);\n      var enumOptions = (0, _utils.optionsList)(itemsSchema);\n\n      var _getUiOptions$enumOpt = (0, _objectSpread3[\"default\"])({}, (0, _utils.getUiOptions)(uiSchema), {\n        enumOptions: enumOptions\n      }),\n          _getUiOptions$enumOpt2 = _getUiOptions$enumOpt.widget,\n          widget = _getUiOptions$enumOpt2 === void 0 ? \"select\" : _getUiOptions$enumOpt2,\n          options = (0, _objectWithoutProperties2[\"default\"])(_getUiOptions$enumOpt, [\"widget\"]);\n\n      var Widget = (0, _utils.getWidget)(schema, widget, widgets);\n      return _react[\"default\"].createElement(Widget, {\n        id: idSchema && idSchema.$id,\n        multiple: true,\n        onChange: this.onSelectChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        options: options,\n        schema: schema,\n        registry: registry,\n        value: items,\n        disabled: disabled,\n        readonly: readonly,\n        required: required,\n        label: label,\n        placeholder: placeholder,\n        formContext: formContext,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      });\n    }\n  }, {\n    key: \"renderFiles\",\n    value: function renderFiles() {\n      var _this$props7 = this.props,\n          schema = _this$props7.schema,\n          uiSchema = _this$props7.uiSchema,\n          idSchema = _this$props7.idSchema,\n          name = _this$props7.name,\n          disabled = _this$props7.disabled,\n          readonly = _this$props7.readonly,\n          autofocus = _this$props7.autofocus,\n          onBlur = _this$props7.onBlur,\n          onFocus = _this$props7.onFocus,\n          _this$props7$registry = _this$props7.registry,\n          registry = _this$props7$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props7$registry,\n          rawErrors = _this$props7.rawErrors;\n      var title = schema.title || name;\n      var items = this.props.formData;\n      var widgets = registry.widgets,\n          formContext = registry.formContext;\n\n      var _getUiOptions2 = (0, _utils.getUiOptions)(uiSchema),\n          _getUiOptions2$widget = _getUiOptions2.widget,\n          widget = _getUiOptions2$widget === void 0 ? \"files\" : _getUiOptions2$widget,\n          options = (0, _objectWithoutProperties2[\"default\"])(_getUiOptions2, [\"widget\"]);\n\n      var Widget = (0, _utils.getWidget)(schema, widget, widgets);\n      return _react[\"default\"].createElement(Widget, {\n        options: options,\n        id: idSchema && idSchema.$id,\n        multiple: true,\n        onChange: this.onSelectChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        schema: schema,\n        title: title,\n        value: items,\n        disabled: disabled,\n        readonly: readonly,\n        formContext: formContext,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      });\n    }\n  }, {\n    key: \"renderFixedArray\",\n    value: function renderFixedArray() {\n      var _this3 = this;\n\n      var _this$props8 = this.props,\n          schema = _this$props8.schema,\n          uiSchema = _this$props8.uiSchema,\n          formData = _this$props8.formData,\n          errorSchema = _this$props8.errorSchema,\n          idPrefix = _this$props8.idPrefix,\n          idSchema = _this$props8.idSchema,\n          name = _this$props8.name,\n          required = _this$props8.required,\n          disabled = _this$props8.disabled,\n          readonly = _this$props8.readonly,\n          autofocus = _this$props8.autofocus,\n          _this$props8$registry = _this$props8.registry,\n          registry = _this$props8$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props8$registry,\n          onBlur = _this$props8.onBlur,\n          onFocus = _this$props8.onFocus,\n          rawErrors = _this$props8.rawErrors;\n      var title = schema.title || name;\n      var items = this.props.formData;\n      var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n          definitions = registry.definitions,\n          fields = registry.fields,\n          formContext = registry.formContext;\n      var TitleField = fields.TitleField;\n      var itemSchemas = schema.items.map(function (item, index) {\n        return (0, _utils.retrieveSchema)(item, definitions, formData[index]);\n      });\n      var additionalSchema = (0, _utils.allowAdditionalItems)(schema) ? (0, _utils.retrieveSchema)(schema.additionalItems, definitions, formData) : null;\n\n      if (!items || items.length < itemSchemas.length) {\n        // to make sure at least all fixed items are generated\n        items = items || [];\n        items = items.concat(new Array(itemSchemas.length - items.length));\n      } // These are the props passed into the render function\n\n\n      var arrayProps = {\n        canAdd: this.canAddItem(items) && additionalSchema,\n        className: \"field field-array field-array-fixed-items\",\n        disabled: disabled,\n        idSchema: idSchema,\n        formData: formData,\n        items: this.state.keyedFormData.map(function (keyedItem, index) {\n          var key = keyedItem.key,\n              item = keyedItem.item;\n          var additional = index >= itemSchemas.length;\n          var itemSchema = additional ? (0, _utils.retrieveSchema)(schema.additionalItems, definitions, item) : itemSchemas[index];\n          var itemIdPrefix = idSchema.$id + \"_\" + index;\n          var itemIdSchema = (0, _utils.toIdSchema)(itemSchema, itemIdPrefix, definitions, item, idPrefix);\n          var itemUiSchema = additional ? uiSchema.additionalItems || {} : (0, _isArray[\"default\"])(uiSchema.items) ? uiSchema.items[index] : uiSchema.items || {};\n          var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n          return _this3.renderArrayFieldItem({\n            key: key,\n            index: index,\n            canRemove: additional,\n            canMoveUp: index >= itemSchemas.length + 1,\n            canMoveDown: additional && index < items.length - 1,\n            itemSchema: itemSchema,\n            itemData: item,\n            itemUiSchema: itemUiSchema,\n            itemIdSchema: itemIdSchema,\n            itemErrorSchema: itemErrorSchema,\n            autofocus: autofocus && index === 0,\n            onBlur: onBlur,\n            onFocus: onFocus\n          });\n        }),\n        onAddClick: this.onAddClick,\n        readonly: readonly,\n        required: required,\n        schema: schema,\n        uiSchema: uiSchema,\n        title: title,\n        TitleField: TitleField,\n        formContext: formContext,\n        rawErrors: rawErrors\n      }; // Check if a custom template template was passed in\n\n      var Template = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultFixedArrayFieldTemplate;\n      return _react[\"default\"].createElement(Template, arrayProps);\n    }\n  }, {\n    key: \"renderArrayFieldItem\",\n    value: function renderArrayFieldItem(props) {\n      var key = props.key,\n          index = props.index,\n          _props$canRemove = props.canRemove,\n          canRemove = _props$canRemove === void 0 ? true : _props$canRemove,\n          _props$canMoveUp = props.canMoveUp,\n          canMoveUp = _props$canMoveUp === void 0 ? true : _props$canMoveUp,\n          _props$canMoveDown = props.canMoveDown,\n          canMoveDown = _props$canMoveDown === void 0 ? true : _props$canMoveDown,\n          itemSchema = props.itemSchema,\n          itemData = props.itemData,\n          itemUiSchema = props.itemUiSchema,\n          itemIdSchema = props.itemIdSchema,\n          itemErrorSchema = props.itemErrorSchema,\n          autofocus = props.autofocus,\n          onBlur = props.onBlur,\n          onFocus = props.onFocus,\n          rawErrors = props.rawErrors;\n      var _this$props9 = this.props,\n          disabled = _this$props9.disabled,\n          readonly = _this$props9.readonly,\n          uiSchema = _this$props9.uiSchema,\n          _this$props9$registry = _this$props9.registry,\n          registry = _this$props9$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props9$registry;\n      var SchemaField = registry.fields.SchemaField;\n\n      var _orderable$removable$ = (0, _objectSpread3[\"default\"])({\n        orderable: true,\n        removable: true\n      }, uiSchema[\"ui:options\"]),\n          orderable = _orderable$removable$.orderable,\n          removable = _orderable$removable$.removable;\n\n      var has = {\n        moveUp: orderable && canMoveUp,\n        moveDown: orderable && canMoveDown,\n        remove: removable && canRemove\n      };\n      has.toolbar = (0, _keys[\"default\"])(has).some(function (key) {\n        return has[key];\n      });\n      return {\n        children: _react[\"default\"].createElement(SchemaField, {\n          schema: itemSchema,\n          uiSchema: itemUiSchema,\n          formData: itemData,\n          errorSchema: itemErrorSchema,\n          idSchema: itemIdSchema,\n          required: this.isItemRequired(itemSchema),\n          onChange: this.onChangeForIndex(index),\n          onBlur: onBlur,\n          onFocus: onFocus,\n          registry: this.props.registry,\n          disabled: this.props.disabled,\n          readonly: this.props.readonly,\n          autofocus: autofocus,\n          rawErrors: rawErrors\n        }),\n        className: \"array-item\",\n        disabled: disabled,\n        hasToolbar: has.toolbar,\n        hasMoveUp: has.moveUp,\n        hasMoveDown: has.moveDown,\n        hasRemove: has.remove,\n        index: index,\n        key: key,\n        onAddIndexClick: this.onAddIndexClick,\n        onDropIndexClick: this.onDropIndexClick,\n        onReorderClick: this.onReorderClick,\n        readonly: readonly\n      };\n    }\n  }, {\n    key: \"itemTitle\",\n    get: function get() {\n      var schema = this.props.schema;\n      return schema.items.title || schema.items.description || \"Item\";\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var nextFormData = nextProps.formData;\n      var previousKeyedFormData = prevState.keyedFormData;\n      var newKeyedFormData = nextFormData.length === previousKeyedFormData.length ? previousKeyedFormData.map(function (previousKeyedFormDatum, index) {\n        return {\n          key: previousKeyedFormDatum.key,\n          item: nextFormData[index]\n        };\n      }) : generateKeyedFormData(nextFormData);\n      return {\n        keyedFormData: newKeyedFormData\n      };\n    }\n  }]);\n  return ArrayField;\n}(_react.Component);\n\n(0, _defineProperty2[\"default\"])(ArrayField, \"defaultProps\", {\n  uiSchema: {},\n  formData: [],\n  idSchema: {},\n  required: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ArrayField.propTypes = types.fieldProps;\n}\n\n(0, _reactLifecyclesCompat.polyfill)(ArrayField);\nvar _default = ArrayField;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/lucaspauker/projects/treehacks/meet/node_modules/react-jsonschema-form/lib/components/fields/ArrayField.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","_Object$defineProperty","exports","value","_keys","_objectWithoutProperties2","_objectSpread3","_parseInt2","_toConsumableArray2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_assertThisInitialized2","_inherits2","_defineProperty2","_isArray","_AddButton","_IconButton","_react","_reactLifecyclesCompat","_includes","types","_UnsupportedField","_utils","_shortid","ArrayFieldTitle","_ref","TitleField","idSchema","title","required","id","concat","$id","createElement","ArrayFieldDescription","_ref2","DescriptionField","description","DefaultArrayItem","props","btnStyle","flex","paddingLeft","paddingRight","fontWeight","key","className","hasToolbar","children","style","display","justifyContent","hasMoveUp","hasMoveDown","icon","tabIndex","disabled","readonly","onClick","onReorderClick","index","hasRemove","type","onDropIndexClick","DefaultFixedArrayFieldTemplate","uiSchema","schema","items","map","canAdd","onAddClick","DefaultNormalArrayFieldTemplate","p","generateRowId","generate","generateKeyedFormData","formData","item","keyedToPlainFormData","keyedFormData","keyedItem","ArrayField","_Component","_this","call","_this$props","_this$props$registry","registry","getDefaultRegistry","definitions","itemSchema","isFixedItems","allowAdditionalItems","additionalItems","getDefaultFormState","undefined","event","preventDefault","onChange","newKeyedFormDataRow","_getNewFormDataRow","newKeyedFormData","state","setState","splice","newErrorSchema","errorSchema","i","filter","_","newIndex","target","blur","reOrderArray","_newKeyedFormData","slice","_this$props2","newFormData","jsonValue","_formData","_keyedFormData","isItemRequired","canAddItem","formItems","_this$props3","_getUiOptions","getUiOptions","addable","maxItems","length","render","_this$props4","_this$props4$registry","hasOwnProperty","reason","renderFixedArray","isFilesArray","renderFiles","isMultiSelect","renderMultiSelect","renderNormalArray","_this2","_this$props5","name","autofocus","_this$props5$registry","onBlur","onFocus","idPrefix","rawErrors","ArrayFieldTemplate","fields","formContext","itemsSchema","retrieveSchema","arrayProps","itemErrorSchema","itemIdPrefix","itemIdSchema","toIdSchema","renderArrayFieldItem","canMoveUp","canMoveDown","itemData","itemUiSchema","Component","_this$props6","label","placeholder","_this$props6$registry","widgets","enumOptions","optionsList","_getUiOptions$enumOpt","_getUiOptions$enumOpt2","widget","options","Widget","getWidget","multiple","onSelectChange","_this$props7","_this$props7$registry","_getUiOptions2","_getUiOptions2$widget","_this3","_this$props8","_this$props8$registry","itemSchemas","additionalSchema","Array","additional","canRemove","Template","_props$canRemove","_props$canMoveUp","_props$canMoveDown","_this$props9","_this$props9$registry","SchemaField","_orderable$removable$","orderable","removable","has","moveUp","moveDown","remove","toolbar","some","onChangeForIndex","onAddIndexClick","get","getDerivedStateFromProps","nextProps","prevState","nextFormData","previousKeyedFormData","previousKeyedFormDatum","process","env","NODE_ENV","propTypes","fieldProps","polyfill","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs2/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports[\"default\"] = void 0;\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/keys\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/objectWithoutProperties\"));\n\nvar _objectSpread3 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/objectSpread\"));\n\nvar _parseInt2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/parse-int\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/defineProperty\"));\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/array/is-array\"));\n\nvar _AddButton = _interopRequireDefault(require(\"../AddButton\"));\n\nvar _IconButton = _interopRequireDefault(require(\"../IconButton\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nvar _includes = _interopRequireDefault(require(\"core-js/library/fn/array/includes\"));\n\nvar types = _interopRequireWildcard(require(\"../../types\"));\n\nvar _UnsupportedField = _interopRequireDefault(require(\"./UnsupportedField\"));\n\nvar _utils = require(\"../../utils\");\n\nvar _shortid = _interopRequireDefault(require(\"shortid\"));\n\nfunction ArrayFieldTitle(_ref) {\n  var TitleField = _ref.TitleField,\n      idSchema = _ref.idSchema,\n      title = _ref.title,\n      required = _ref.required;\n\n  if (!title) {\n    return null;\n  }\n\n  var id = \"\".concat(idSchema.$id, \"__title\");\n  return _react[\"default\"].createElement(TitleField, {\n    id: id,\n    title: title,\n    required: required\n  });\n}\n\nfunction ArrayFieldDescription(_ref2) {\n  var DescriptionField = _ref2.DescriptionField,\n      idSchema = _ref2.idSchema,\n      description = _ref2.description;\n\n  if (!description) {\n    return null;\n  }\n\n  var id = \"\".concat(idSchema.$id, \"__description\");\n  return _react[\"default\"].createElement(DescriptionField, {\n    id: id,\n    description: description\n  });\n} // Used in the two templates\n\n\nfunction DefaultArrayItem(props) {\n  var btnStyle = {\n    flex: 1,\n    paddingLeft: 6,\n    paddingRight: 6,\n    fontWeight: \"bold\"\n  };\n  return _react[\"default\"].createElement(\"div\", {\n    key: props.key,\n    className: props.className\n  }, _react[\"default\"].createElement(\"div\", {\n    className: props.hasToolbar ? \"col-xs-9\" : \"col-xs-12\"\n  }, props.children), props.hasToolbar && _react[\"default\"].createElement(\"div\", {\n    className: \"col-xs-3 array-item-toolbox\"\n  }, _react[\"default\"].createElement(\"div\", {\n    className: \"btn-group\",\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-around\"\n    }\n  }, (props.hasMoveUp || props.hasMoveDown) && _react[\"default\"].createElement(_IconButton[\"default\"], {\n    icon: \"arrow-up\",\n    className: \"array-item-move-up\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly || !props.hasMoveUp,\n    onClick: props.onReorderClick(props.index, props.index - 1)\n  }), (props.hasMoveUp || props.hasMoveDown) && _react[\"default\"].createElement(_IconButton[\"default\"], {\n    icon: \"arrow-down\",\n    className: \"array-item-move-down\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly || !props.hasMoveDown,\n    onClick: props.onReorderClick(props.index, props.index + 1)\n  }), props.hasRemove && _react[\"default\"].createElement(_IconButton[\"default\"], {\n    type: \"danger\",\n    icon: \"remove\",\n    className: \"array-item-remove\",\n    tabIndex: \"-1\",\n    style: btnStyle,\n    disabled: props.disabled || props.readonly,\n    onClick: props.onDropIndexClick(props.index)\n  }))));\n}\n\nfunction DefaultFixedArrayFieldTemplate(props) {\n  return _react[\"default\"].createElement(\"fieldset\", {\n    className: props.className,\n    id: props.idSchema.$id\n  }, _react[\"default\"].createElement(ArrayFieldTitle, {\n    key: \"array-field-title-\".concat(props.idSchema.$id),\n    TitleField: props.TitleField,\n    idSchema: props.idSchema,\n    title: props.uiSchema[\"ui:title\"] || props.title,\n    required: props.required\n  }), (props.uiSchema[\"ui:description\"] || props.schema.description) && _react[\"default\"].createElement(\"div\", {\n    className: \"field-description\",\n    key: \"field-description-\".concat(props.idSchema.$id)\n  }, props.uiSchema[\"ui:description\"] || props.schema.description), _react[\"default\"].createElement(\"div\", {\n    className: \"row array-item-list\",\n    key: \"array-item-list-\".concat(props.idSchema.$id)\n  }, props.items && props.items.map(DefaultArrayItem)), props.canAdd && _react[\"default\"].createElement(_AddButton[\"default\"], {\n    className: \"array-item-add\",\n    onClick: props.onAddClick,\n    disabled: props.disabled || props.readonly\n  }));\n}\n\nfunction DefaultNormalArrayFieldTemplate(props) {\n  return _react[\"default\"].createElement(\"fieldset\", {\n    className: props.className,\n    id: props.idSchema.$id\n  }, _react[\"default\"].createElement(ArrayFieldTitle, {\n    key: \"array-field-title-\".concat(props.idSchema.$id),\n    TitleField: props.TitleField,\n    idSchema: props.idSchema,\n    title: props.uiSchema[\"ui:title\"] || props.title,\n    required: props.required\n  }), (props.uiSchema[\"ui:description\"] || props.schema.description) && _react[\"default\"].createElement(ArrayFieldDescription, {\n    key: \"array-field-description-\".concat(props.idSchema.$id),\n    DescriptionField: props.DescriptionField,\n    idSchema: props.idSchema,\n    description: props.uiSchema[\"ui:description\"] || props.schema.description\n  }), _react[\"default\"].createElement(\"div\", {\n    className: \"row array-item-list\",\n    key: \"array-item-list-\".concat(props.idSchema.$id)\n  }, props.items && props.items.map(function (p) {\n    return DefaultArrayItem(p);\n  })), props.canAdd && _react[\"default\"].createElement(_AddButton[\"default\"], {\n    className: \"array-item-add\",\n    onClick: props.onAddClick,\n    disabled: props.disabled || props.readonly\n  }));\n}\n\nfunction generateRowId() {\n  return _shortid[\"default\"].generate();\n}\n\nfunction generateKeyedFormData(formData) {\n  return !(0, _isArray[\"default\"])(formData) ? [] : formData.map(function (item) {\n    return {\n      key: generateRowId(),\n      item: item\n    };\n  });\n}\n\nfunction keyedToPlainFormData(keyedFormData) {\n  return keyedFormData.map(function (keyedItem) {\n    return keyedItem.item;\n  });\n}\n\nvar ArrayField =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(ArrayField, _Component);\n\n  function ArrayField(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, ArrayField);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(ArrayField).call(this, props));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_getNewFormDataRow\", function () {\n      var _this$props = _this.props,\n          schema = _this$props.schema,\n          _this$props$registry = _this$props.registry,\n          registry = _this$props$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props$registry;\n      var definitions = registry.definitions;\n      var itemSchema = schema.items;\n\n      if ((0, _utils.isFixedItems)(schema) && (0, _utils.allowAdditionalItems)(schema)) {\n        itemSchema = schema.additionalItems;\n      }\n\n      return (0, _utils.getDefaultFormState)(itemSchema, undefined, definitions);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onAddClick\", function (event) {\n      event.preventDefault();\n      var onChange = _this.props.onChange;\n      var newKeyedFormDataRow = {\n        key: generateRowId(),\n        item: _this._getNewFormDataRow()\n      };\n      var newKeyedFormData = [].concat((0, _toConsumableArray2[\"default\"])(_this.state.keyedFormData), [newKeyedFormDataRow]);\n\n      _this.setState({\n        keyedFormData: newKeyedFormData\n      }, function () {\n        return onChange(keyedToPlainFormData(newKeyedFormData));\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onAddIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var newKeyedFormDataRow = {\n          key: generateRowId(),\n          item: _this._getNewFormDataRow()\n        };\n        var newKeyedFormData = (0, _toConsumableArray2[\"default\"])(_this.state.keyedFormData);\n        newKeyedFormData.splice(index, 0, newKeyedFormDataRow);\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData));\n        });\n      };\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onDropIndexClick\", function (index) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n        }\n\n        var onChange = _this.props.onChange;\n        var keyedFormData = _this.state.keyedFormData; // refs #195: revalidate to ensure properly reindexing errors\n\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            i = (0, _parseInt2[\"default\"])(i);\n\n            if (i < index) {\n              newErrorSchema[i] = errorSchema[i];\n            } else if (i > index) {\n              newErrorSchema[i - 1] = errorSchema[i];\n            }\n          }\n        }\n\n        var newKeyedFormData = keyedFormData.filter(function (_, i) {\n          return i !== index;\n        });\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onReorderClick\", function (index, newIndex) {\n      return function (event) {\n        if (event) {\n          event.preventDefault();\n          event.target.blur();\n        }\n\n        var onChange = _this.props.onChange;\n        var newErrorSchema;\n\n        if (_this.props.errorSchema) {\n          newErrorSchema = {};\n          var errorSchema = _this.props.errorSchema;\n\n          for (var i in errorSchema) {\n            if (i == index) {\n              newErrorSchema[newIndex] = errorSchema[index];\n            } else if (i == newIndex) {\n              newErrorSchema[index] = errorSchema[newIndex];\n            } else {\n              newErrorSchema[i] = errorSchema[i];\n            }\n          }\n        }\n\n        var keyedFormData = _this.state.keyedFormData;\n\n        function reOrderArray() {\n          // Copy item\n          var _newKeyedFormData = keyedFormData.slice(); // Moves item from index to newIndex\n\n\n          _newKeyedFormData.splice(index, 1);\n\n          _newKeyedFormData.splice(newIndex, 0, keyedFormData[index]);\n\n          return _newKeyedFormData;\n        }\n\n        var newKeyedFormData = reOrderArray();\n\n        _this.setState({\n          keyedFormData: newKeyedFormData\n        }, function () {\n          return onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema);\n        });\n      };\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onChangeForIndex\", function (index) {\n      return function (value, errorSchema) {\n        var _this$props2 = _this.props,\n            formData = _this$props2.formData,\n            onChange = _this$props2.onChange;\n        var newFormData = formData.map(function (item, i) {\n          // We need to treat undefined items as nulls to have validation.\n          // See https://github.com/tdegrunt/jsonschema/issues/206\n          var jsonValue = typeof value === \"undefined\" ? null : value;\n          return index === i ? jsonValue : item;\n        });\n        onChange(newFormData, errorSchema && _this.props.errorSchema && (0, _objectSpread3[\"default\"])({}, _this.props.errorSchema, (0, _defineProperty2[\"default\"])({}, index, errorSchema)));\n      };\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onSelectChange\", function (value) {\n      _this.props.onChange(value);\n    });\n    var _formData = props.formData;\n\n    var _keyedFormData = generateKeyedFormData(_formData);\n\n    _this.state = {\n      keyedFormData: _keyedFormData\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ArrayField, [{\n    key: \"isItemRequired\",\n    value: function isItemRequired(itemSchema) {\n      if ((0, _isArray[\"default\"])(itemSchema.type)) {\n        // While we don't yet support composite/nullable jsonschema types, it's\n        // future-proof to check for requirement against these.\n        return !(0, _includes[\"default\"])(itemSchema.type, \"null\");\n      } // All non-null array item types are inherently required by design\n\n\n      return itemSchema.type !== \"null\";\n    }\n  }, {\n    key: \"canAddItem\",\n    value: function canAddItem(formItems) {\n      var _this$props3 = this.props,\n          schema = _this$props3.schema,\n          uiSchema = _this$props3.uiSchema;\n\n      var _getUiOptions = (0, _utils.getUiOptions)(uiSchema),\n          addable = _getUiOptions.addable;\n\n      if (addable !== false) {\n        // if ui:options.addable was not explicitly set to false, we can add\n        // another item if we have not exceeded maxItems yet\n        if (schema.maxItems !== undefined) {\n          addable = formItems.length < schema.maxItems;\n        } else {\n          addable = true;\n        }\n      }\n\n      return addable;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          schema = _this$props4.schema,\n          uiSchema = _this$props4.uiSchema,\n          idSchema = _this$props4.idSchema,\n          _this$props4$registry = _this$props4.registry,\n          registry = _this$props4$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props4$registry;\n      var definitions = registry.definitions;\n\n      if (!schema.hasOwnProperty(\"items\")) {\n        return _react[\"default\"].createElement(_UnsupportedField[\"default\"], {\n          schema: schema,\n          idSchema: idSchema,\n          reason: \"Missing items definition\"\n        });\n      }\n\n      if ((0, _utils.isFixedItems)(schema)) {\n        return this.renderFixedArray();\n      }\n\n      if ((0, _utils.isFilesArray)(schema, uiSchema, definitions)) {\n        return this.renderFiles();\n      }\n\n      if ((0, _utils.isMultiSelect)(schema, definitions)) {\n        return this.renderMultiSelect();\n      }\n\n      return this.renderNormalArray();\n    }\n  }, {\n    key: \"renderNormalArray\",\n    value: function renderNormalArray() {\n      var _this2 = this;\n\n      var _this$props5 = this.props,\n          schema = _this$props5.schema,\n          uiSchema = _this$props5.uiSchema,\n          formData = _this$props5.formData,\n          errorSchema = _this$props5.errorSchema,\n          idSchema = _this$props5.idSchema,\n          name = _this$props5.name,\n          required = _this$props5.required,\n          disabled = _this$props5.disabled,\n          readonly = _this$props5.readonly,\n          autofocus = _this$props5.autofocus,\n          _this$props5$registry = _this$props5.registry,\n          registry = _this$props5$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props5$registry,\n          onBlur = _this$props5.onBlur,\n          onFocus = _this$props5.onFocus,\n          idPrefix = _this$props5.idPrefix,\n          rawErrors = _this$props5.rawErrors;\n      var title = schema.title === undefined ? name : schema.title;\n      var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n          definitions = registry.definitions,\n          fields = registry.fields,\n          formContext = registry.formContext;\n      var TitleField = fields.TitleField,\n          DescriptionField = fields.DescriptionField;\n      var itemsSchema = (0, _utils.retrieveSchema)(schema.items, definitions);\n      var arrayProps = {\n        canAdd: this.canAddItem(formData),\n        items: this.state.keyedFormData.map(function (keyedItem, index) {\n          var key = keyedItem.key,\n              item = keyedItem.item;\n          var itemSchema = (0, _utils.retrieveSchema)(schema.items, definitions, item);\n          var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n          var itemIdPrefix = idSchema.$id + \"_\" + index;\n          var itemIdSchema = (0, _utils.toIdSchema)(itemSchema, itemIdPrefix, definitions, item, idPrefix);\n          return _this2.renderArrayFieldItem({\n            key: key,\n            index: index,\n            canMoveUp: index > 0,\n            canMoveDown: index < formData.length - 1,\n            itemSchema: itemSchema,\n            itemIdSchema: itemIdSchema,\n            itemErrorSchema: itemErrorSchema,\n            itemData: item,\n            itemUiSchema: uiSchema.items,\n            autofocus: autofocus && index === 0,\n            onBlur: onBlur,\n            onFocus: onFocus\n          });\n        }),\n        className: \"field field-array field-array-of-\".concat(itemsSchema.type),\n        DescriptionField: DescriptionField,\n        disabled: disabled,\n        idSchema: idSchema,\n        uiSchema: uiSchema,\n        onAddClick: this.onAddClick,\n        readonly: readonly,\n        required: required,\n        schema: schema,\n        title: title,\n        TitleField: TitleField,\n        formContext: formContext,\n        formData: formData,\n        rawErrors: rawErrors,\n        registry: registry\n      }; // Check if a custom render function was passed in\n\n      var Component = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultNormalArrayFieldTemplate;\n      return _react[\"default\"].createElement(Component, arrayProps);\n    }\n  }, {\n    key: \"renderMultiSelect\",\n    value: function renderMultiSelect() {\n      var _this$props6 = this.props,\n          schema = _this$props6.schema,\n          idSchema = _this$props6.idSchema,\n          uiSchema = _this$props6.uiSchema,\n          formData = _this$props6.formData,\n          disabled = _this$props6.disabled,\n          readonly = _this$props6.readonly,\n          required = _this$props6.required,\n          label = _this$props6.label,\n          placeholder = _this$props6.placeholder,\n          autofocus = _this$props6.autofocus,\n          onBlur = _this$props6.onBlur,\n          onFocus = _this$props6.onFocus,\n          _this$props6$registry = _this$props6.registry,\n          registry = _this$props6$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props6$registry,\n          rawErrors = _this$props6.rawErrors;\n      var items = this.props.formData;\n      var widgets = registry.widgets,\n          definitions = registry.definitions,\n          formContext = registry.formContext;\n      var itemsSchema = (0, _utils.retrieveSchema)(schema.items, definitions, formData);\n      var enumOptions = (0, _utils.optionsList)(itemsSchema);\n\n      var _getUiOptions$enumOpt = (0, _objectSpread3[\"default\"])({}, (0, _utils.getUiOptions)(uiSchema), {\n        enumOptions: enumOptions\n      }),\n          _getUiOptions$enumOpt2 = _getUiOptions$enumOpt.widget,\n          widget = _getUiOptions$enumOpt2 === void 0 ? \"select\" : _getUiOptions$enumOpt2,\n          options = (0, _objectWithoutProperties2[\"default\"])(_getUiOptions$enumOpt, [\"widget\"]);\n\n      var Widget = (0, _utils.getWidget)(schema, widget, widgets);\n      return _react[\"default\"].createElement(Widget, {\n        id: idSchema && idSchema.$id,\n        multiple: true,\n        onChange: this.onSelectChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        options: options,\n        schema: schema,\n        registry: registry,\n        value: items,\n        disabled: disabled,\n        readonly: readonly,\n        required: required,\n        label: label,\n        placeholder: placeholder,\n        formContext: formContext,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      });\n    }\n  }, {\n    key: \"renderFiles\",\n    value: function renderFiles() {\n      var _this$props7 = this.props,\n          schema = _this$props7.schema,\n          uiSchema = _this$props7.uiSchema,\n          idSchema = _this$props7.idSchema,\n          name = _this$props7.name,\n          disabled = _this$props7.disabled,\n          readonly = _this$props7.readonly,\n          autofocus = _this$props7.autofocus,\n          onBlur = _this$props7.onBlur,\n          onFocus = _this$props7.onFocus,\n          _this$props7$registry = _this$props7.registry,\n          registry = _this$props7$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props7$registry,\n          rawErrors = _this$props7.rawErrors;\n      var title = schema.title || name;\n      var items = this.props.formData;\n      var widgets = registry.widgets,\n          formContext = registry.formContext;\n\n      var _getUiOptions2 = (0, _utils.getUiOptions)(uiSchema),\n          _getUiOptions2$widget = _getUiOptions2.widget,\n          widget = _getUiOptions2$widget === void 0 ? \"files\" : _getUiOptions2$widget,\n          options = (0, _objectWithoutProperties2[\"default\"])(_getUiOptions2, [\"widget\"]);\n\n      var Widget = (0, _utils.getWidget)(schema, widget, widgets);\n      return _react[\"default\"].createElement(Widget, {\n        options: options,\n        id: idSchema && idSchema.$id,\n        multiple: true,\n        onChange: this.onSelectChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        schema: schema,\n        title: title,\n        value: items,\n        disabled: disabled,\n        readonly: readonly,\n        formContext: formContext,\n        autofocus: autofocus,\n        rawErrors: rawErrors\n      });\n    }\n  }, {\n    key: \"renderFixedArray\",\n    value: function renderFixedArray() {\n      var _this3 = this;\n\n      var _this$props8 = this.props,\n          schema = _this$props8.schema,\n          uiSchema = _this$props8.uiSchema,\n          formData = _this$props8.formData,\n          errorSchema = _this$props8.errorSchema,\n          idPrefix = _this$props8.idPrefix,\n          idSchema = _this$props8.idSchema,\n          name = _this$props8.name,\n          required = _this$props8.required,\n          disabled = _this$props8.disabled,\n          readonly = _this$props8.readonly,\n          autofocus = _this$props8.autofocus,\n          _this$props8$registry = _this$props8.registry,\n          registry = _this$props8$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props8$registry,\n          onBlur = _this$props8.onBlur,\n          onFocus = _this$props8.onFocus,\n          rawErrors = _this$props8.rawErrors;\n      var title = schema.title || name;\n      var items = this.props.formData;\n      var ArrayFieldTemplate = registry.ArrayFieldTemplate,\n          definitions = registry.definitions,\n          fields = registry.fields,\n          formContext = registry.formContext;\n      var TitleField = fields.TitleField;\n      var itemSchemas = schema.items.map(function (item, index) {\n        return (0, _utils.retrieveSchema)(item, definitions, formData[index]);\n      });\n      var additionalSchema = (0, _utils.allowAdditionalItems)(schema) ? (0, _utils.retrieveSchema)(schema.additionalItems, definitions, formData) : null;\n\n      if (!items || items.length < itemSchemas.length) {\n        // to make sure at least all fixed items are generated\n        items = items || [];\n        items = items.concat(new Array(itemSchemas.length - items.length));\n      } // These are the props passed into the render function\n\n\n      var arrayProps = {\n        canAdd: this.canAddItem(items) && additionalSchema,\n        className: \"field field-array field-array-fixed-items\",\n        disabled: disabled,\n        idSchema: idSchema,\n        formData: formData,\n        items: this.state.keyedFormData.map(function (keyedItem, index) {\n          var key = keyedItem.key,\n              item = keyedItem.item;\n          var additional = index >= itemSchemas.length;\n          var itemSchema = additional ? (0, _utils.retrieveSchema)(schema.additionalItems, definitions, item) : itemSchemas[index];\n          var itemIdPrefix = idSchema.$id + \"_\" + index;\n          var itemIdSchema = (0, _utils.toIdSchema)(itemSchema, itemIdPrefix, definitions, item, idPrefix);\n          var itemUiSchema = additional ? uiSchema.additionalItems || {} : (0, _isArray[\"default\"])(uiSchema.items) ? uiSchema.items[index] : uiSchema.items || {};\n          var itemErrorSchema = errorSchema ? errorSchema[index] : undefined;\n          return _this3.renderArrayFieldItem({\n            key: key,\n            index: index,\n            canRemove: additional,\n            canMoveUp: index >= itemSchemas.length + 1,\n            canMoveDown: additional && index < items.length - 1,\n            itemSchema: itemSchema,\n            itemData: item,\n            itemUiSchema: itemUiSchema,\n            itemIdSchema: itemIdSchema,\n            itemErrorSchema: itemErrorSchema,\n            autofocus: autofocus && index === 0,\n            onBlur: onBlur,\n            onFocus: onFocus\n          });\n        }),\n        onAddClick: this.onAddClick,\n        readonly: readonly,\n        required: required,\n        schema: schema,\n        uiSchema: uiSchema,\n        title: title,\n        TitleField: TitleField,\n        formContext: formContext,\n        rawErrors: rawErrors\n      }; // Check if a custom template template was passed in\n\n      var Template = uiSchema[\"ui:ArrayFieldTemplate\"] || ArrayFieldTemplate || DefaultFixedArrayFieldTemplate;\n      return _react[\"default\"].createElement(Template, arrayProps);\n    }\n  }, {\n    key: \"renderArrayFieldItem\",\n    value: function renderArrayFieldItem(props) {\n      var key = props.key,\n          index = props.index,\n          _props$canRemove = props.canRemove,\n          canRemove = _props$canRemove === void 0 ? true : _props$canRemove,\n          _props$canMoveUp = props.canMoveUp,\n          canMoveUp = _props$canMoveUp === void 0 ? true : _props$canMoveUp,\n          _props$canMoveDown = props.canMoveDown,\n          canMoveDown = _props$canMoveDown === void 0 ? true : _props$canMoveDown,\n          itemSchema = props.itemSchema,\n          itemData = props.itemData,\n          itemUiSchema = props.itemUiSchema,\n          itemIdSchema = props.itemIdSchema,\n          itemErrorSchema = props.itemErrorSchema,\n          autofocus = props.autofocus,\n          onBlur = props.onBlur,\n          onFocus = props.onFocus,\n          rawErrors = props.rawErrors;\n      var _this$props9 = this.props,\n          disabled = _this$props9.disabled,\n          readonly = _this$props9.readonly,\n          uiSchema = _this$props9.uiSchema,\n          _this$props9$registry = _this$props9.registry,\n          registry = _this$props9$registry === void 0 ? (0, _utils.getDefaultRegistry)() : _this$props9$registry;\n      var SchemaField = registry.fields.SchemaField;\n\n      var _orderable$removable$ = (0, _objectSpread3[\"default\"])({\n        orderable: true,\n        removable: true\n      }, uiSchema[\"ui:options\"]),\n          orderable = _orderable$removable$.orderable,\n          removable = _orderable$removable$.removable;\n\n      var has = {\n        moveUp: orderable && canMoveUp,\n        moveDown: orderable && canMoveDown,\n        remove: removable && canRemove\n      };\n      has.toolbar = (0, _keys[\"default\"])(has).some(function (key) {\n        return has[key];\n      });\n      return {\n        children: _react[\"default\"].createElement(SchemaField, {\n          schema: itemSchema,\n          uiSchema: itemUiSchema,\n          formData: itemData,\n          errorSchema: itemErrorSchema,\n          idSchema: itemIdSchema,\n          required: this.isItemRequired(itemSchema),\n          onChange: this.onChangeForIndex(index),\n          onBlur: onBlur,\n          onFocus: onFocus,\n          registry: this.props.registry,\n          disabled: this.props.disabled,\n          readonly: this.props.readonly,\n          autofocus: autofocus,\n          rawErrors: rawErrors\n        }),\n        className: \"array-item\",\n        disabled: disabled,\n        hasToolbar: has.toolbar,\n        hasMoveUp: has.moveUp,\n        hasMoveDown: has.moveDown,\n        hasRemove: has.remove,\n        index: index,\n        key: key,\n        onAddIndexClick: this.onAddIndexClick,\n        onDropIndexClick: this.onDropIndexClick,\n        onReorderClick: this.onReorderClick,\n        readonly: readonly\n      };\n    }\n  }, {\n    key: \"itemTitle\",\n    get: function get() {\n      var schema = this.props.schema;\n      return schema.items.title || schema.items.description || \"Item\";\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var nextFormData = nextProps.formData;\n      var previousKeyedFormData = prevState.keyedFormData;\n      var newKeyedFormData = nextFormData.length === previousKeyedFormData.length ? previousKeyedFormData.map(function (previousKeyedFormDatum, index) {\n        return {\n          key: previousKeyedFormDatum.key,\n          item: nextFormData[index]\n        };\n      }) : generateKeyedFormData(nextFormData);\n      return {\n        keyedFormData: newKeyedFormData\n      };\n    }\n  }]);\n  return ArrayField;\n}(_react.Component);\n\n(0, _defineProperty2[\"default\"])(ArrayField, \"defaultProps\", {\n  uiSchema: {},\n  formData: [],\n  idSchema: {},\n  required: false,\n  disabled: false,\n  readonly: false,\n  autofocus: false\n});\n\nif (process.env.NODE_ENV !== \"production\") {\n  ArrayField.propTypes = types.fieldProps;\n}\n\n(0, _reactLifecyclesCompat.polyfill)(ArrayField);\nvar _default = ArrayField;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}