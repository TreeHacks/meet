{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs2/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/objectWithoutProperties\"));\n\nvar _getIterator2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/get-iterator\"));\n\nvar _assign = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/assign\"));\n\nvar _parseInt2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/parse-int\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar types = _interopRequireWildcard(require(\"../../types\"));\n\nvar _utils = require(\"../../utils\");\n\nvar AnyOfField =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(AnyOfField, _Component);\n\n  function AnyOfField(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, AnyOfField);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(AnyOfField).call(this, props));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onOptionChange\", function (option) {\n      var selectedOption = (0, _parseInt2[\"default\"])(option, 10);\n      var _this$props = _this.props,\n          formData = _this$props.formData,\n          onChange = _this$props.onChange,\n          options = _this$props.options,\n          registry = _this$props.registry;\n      var definitions = registry.definitions;\n      var newOption = (0, _utils.retrieveSchema)(options[selectedOption], definitions, formData); // If the new option is of type object and the current data is an object,\n      // discard properties added using the old option.\n\n      var newFormData = undefined;\n\n      if ((0, _utils.guessType)(formData) === \"object\" && (newOption.type === \"object\" || newOption.properties)) {\n        newFormData = (0, _assign[\"default\"])({}, formData);\n        var optionsToDiscard = options.slice();\n        optionsToDiscard.splice(selectedOption, 1); // Discard any data added using other options\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = (0, _getIterator2[\"default\"])(optionsToDiscard), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _option = _step.value;\n\n            if (_option.properties) {\n              for (var key in _option.properties) {\n                if (newFormData.hasOwnProperty(key)) {\n                  delete newFormData[key];\n                }\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      } // Call getDefaultFormState to make sure defaults are populated on change.\n\n\n      onChange((0, _utils.getDefaultFormState)(options[selectedOption], newFormData, definitions));\n\n      _this.setState({\n        selectedOption: (0, _parseInt2[\"default\"])(option, 10)\n      });\n    });\n    var _this$props2 = _this.props,\n        _formData = _this$props2.formData,\n        _options = _this$props2.options;\n    _this.state = {\n      selectedOption: _this.getMatchingOption(_formData, _options)\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(AnyOfField, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var matchingOption = this.getMatchingOption(nextProps.formData, nextProps.options);\n\n      if (matchingOption === this.state.selectedOption) {\n        return;\n      }\n\n      this.setState({\n        selectedOption: matchingOption\n      });\n    }\n  }, {\n    key: \"getMatchingOption\",\n    value: function getMatchingOption(formData, options) {\n      var definitions = this.props.registry.definitions;\n      var option = (0, _utils.getMatchingOption)(formData, options, definitions);\n\n      if (option !== 0) {\n        return option;\n      } // If the form data matches none of the options, use the currently selected\n      // option, assuming it's available; otherwise use the first option\n\n\n      return this && this.state ? this.state.selectedOption : 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          baseType = _this$props3.baseType,\n          disabled = _this$props3.disabled,\n          errorSchema = _this$props3.errorSchema,\n          formData = _this$props3.formData,\n          idPrefix = _this$props3.idPrefix,\n          idSchema = _this$props3.idSchema,\n          onBlur = _this$props3.onBlur,\n          onChange = _this$props3.onChange,\n          onFocus = _this$props3.onFocus,\n          options = _this$props3.options,\n          registry = _this$props3.registry,\n          safeRenderCompletion = _this$props3.safeRenderCompletion,\n          uiSchema = _this$props3.uiSchema;\n      var _SchemaField = registry.fields.SchemaField;\n      var widgets = registry.widgets;\n      var selectedOption = this.state.selectedOption;\n\n      var _getUiOptions = (0, _utils.getUiOptions)(uiSchema),\n          _getUiOptions$widget = _getUiOptions.widget,\n          widget = _getUiOptions$widget === void 0 ? \"select\" : _getUiOptions$widget,\n          uiOptions = (0, _objectWithoutProperties2[\"default\"])(_getUiOptions, [\"widget\"]);\n\n      var Widget = (0, _utils.getWidget)({\n        type: \"number\"\n      }, widget, widgets);\n      var option = options[selectedOption] || null;\n      var optionSchema;\n\n      if (option) {\n        // If the subschema doesn't declare a type, infer the type from the\n        // parent schema\n        optionSchema = option.type ? option : (0, _assign[\"default\"])({}, option, {\n          type: baseType\n        });\n      }\n\n      var enumOptions = options.map(function (option, index) {\n        return {\n          label: option.title || \"Option \".concat(index + 1),\n          value: index\n        };\n      });\n      return _react[\"default\"].createElement(\"div\", {\n        className: \"panel panel-default panel-body\"\n      }, _react[\"default\"].createElement(\"div\", {\n        className: \"form-group\"\n      }, _react[\"default\"].createElement(Widget, (0, _extends2[\"default\"])({\n        id: \"\".concat(idSchema.$id, \"_anyof_select\"),\n        schema: {\n          type: \"number\",\n          \"default\": 0\n        },\n        onChange: this.onOptionChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        value: selectedOption,\n        options: {\n          enumOptions: enumOptions\n        }\n      }, uiOptions))), option !== null && _react[\"default\"].createElement(_SchemaField, {\n        schema: optionSchema,\n        uiSchema: uiSchema,\n        errorSchema: errorSchema,\n        idSchema: idSchema,\n        idPrefix: idPrefix,\n        formData: formData,\n        onChange: onChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        registry: registry,\n        safeRenderCompletion: safeRenderCompletion,\n        disabled: disabled\n      }));\n    }\n  }]);\n  return AnyOfField;\n}(_react.Component);\n\nAnyOfField.defaultProps = {\n  disabled: false,\n  errorSchema: {},\n  idSchema: {},\n  uiSchema: {}\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  AnyOfField.propTypes = {\n    options: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].object).isRequired,\n    baseType: _propTypes[\"default\"].string,\n    uiSchema: _propTypes[\"default\"].object,\n    idSchema: _propTypes[\"default\"].object,\n    formData: _propTypes[\"default\"].any,\n    errorSchema: _propTypes[\"default\"].object,\n    registry: types.registry.isRequired\n  };\n}\n\nvar _default = AnyOfField;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/lucaspauker/projects/treehacks/meet/node_modules/react-jsonschema-form/lib/components/fields/MultiSchemaField.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","_Object$defineProperty","exports","value","_extends2","_objectWithoutProperties2","_getIterator2","_assign","_parseInt2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_assertThisInitialized2","_inherits2","_defineProperty2","_react","_propTypes","types","_utils","AnyOfField","_Component","props","_this","call","option","selectedOption","_this$props","formData","onChange","options","registry","definitions","newOption","retrieveSchema","newFormData","undefined","guessType","type","properties","optionsToDiscard","slice","splice","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","next","done","_option","key","hasOwnProperty","err","getDefaultFormState","setState","_this$props2","_formData","_options","state","getMatchingOption","componentWillReceiveProps","nextProps","matchingOption","render","_this$props3","baseType","disabled","errorSchema","idPrefix","idSchema","onBlur","onFocus","safeRenderCompletion","uiSchema","_SchemaField","fields","SchemaField","widgets","_getUiOptions","getUiOptions","_getUiOptions$widget","widget","uiOptions","Widget","getWidget","optionSchema","enumOptions","map","index","label","title","concat","createElement","className","id","$id","schema","onOptionChange","Component","defaultProps","process","env","NODE_ENV","propTypes","arrayOf","object","isRequired","string","any","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs2/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/objectWithoutProperties\"));\n\nvar _getIterator2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/get-iterator\"));\n\nvar _assign = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/assign\"));\n\nvar _parseInt2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/parse-int\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar types = _interopRequireWildcard(require(\"../../types\"));\n\nvar _utils = require(\"../../utils\");\n\nvar AnyOfField =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(AnyOfField, _Component);\n\n  function AnyOfField(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, AnyOfField);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(AnyOfField).call(this, props));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onOptionChange\", function (option) {\n      var selectedOption = (0, _parseInt2[\"default\"])(option, 10);\n      var _this$props = _this.props,\n          formData = _this$props.formData,\n          onChange = _this$props.onChange,\n          options = _this$props.options,\n          registry = _this$props.registry;\n      var definitions = registry.definitions;\n      var newOption = (0, _utils.retrieveSchema)(options[selectedOption], definitions, formData); // If the new option is of type object and the current data is an object,\n      // discard properties added using the old option.\n\n      var newFormData = undefined;\n\n      if ((0, _utils.guessType)(formData) === \"object\" && (newOption.type === \"object\" || newOption.properties)) {\n        newFormData = (0, _assign[\"default\"])({}, formData);\n        var optionsToDiscard = options.slice();\n        optionsToDiscard.splice(selectedOption, 1); // Discard any data added using other options\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = (0, _getIterator2[\"default\"])(optionsToDiscard), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _option = _step.value;\n\n            if (_option.properties) {\n              for (var key in _option.properties) {\n                if (newFormData.hasOwnProperty(key)) {\n                  delete newFormData[key];\n                }\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      } // Call getDefaultFormState to make sure defaults are populated on change.\n\n\n      onChange((0, _utils.getDefaultFormState)(options[selectedOption], newFormData, definitions));\n\n      _this.setState({\n        selectedOption: (0, _parseInt2[\"default\"])(option, 10)\n      });\n    });\n    var _this$props2 = _this.props,\n        _formData = _this$props2.formData,\n        _options = _this$props2.options;\n    _this.state = {\n      selectedOption: _this.getMatchingOption(_formData, _options)\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(AnyOfField, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var matchingOption = this.getMatchingOption(nextProps.formData, nextProps.options);\n\n      if (matchingOption === this.state.selectedOption) {\n        return;\n      }\n\n      this.setState({\n        selectedOption: matchingOption\n      });\n    }\n  }, {\n    key: \"getMatchingOption\",\n    value: function getMatchingOption(formData, options) {\n      var definitions = this.props.registry.definitions;\n      var option = (0, _utils.getMatchingOption)(formData, options, definitions);\n\n      if (option !== 0) {\n        return option;\n      } // If the form data matches none of the options, use the currently selected\n      // option, assuming it's available; otherwise use the first option\n\n\n      return this && this.state ? this.state.selectedOption : 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          baseType = _this$props3.baseType,\n          disabled = _this$props3.disabled,\n          errorSchema = _this$props3.errorSchema,\n          formData = _this$props3.formData,\n          idPrefix = _this$props3.idPrefix,\n          idSchema = _this$props3.idSchema,\n          onBlur = _this$props3.onBlur,\n          onChange = _this$props3.onChange,\n          onFocus = _this$props3.onFocus,\n          options = _this$props3.options,\n          registry = _this$props3.registry,\n          safeRenderCompletion = _this$props3.safeRenderCompletion,\n          uiSchema = _this$props3.uiSchema;\n      var _SchemaField = registry.fields.SchemaField;\n      var widgets = registry.widgets;\n      var selectedOption = this.state.selectedOption;\n\n      var _getUiOptions = (0, _utils.getUiOptions)(uiSchema),\n          _getUiOptions$widget = _getUiOptions.widget,\n          widget = _getUiOptions$widget === void 0 ? \"select\" : _getUiOptions$widget,\n          uiOptions = (0, _objectWithoutProperties2[\"default\"])(_getUiOptions, [\"widget\"]);\n\n      var Widget = (0, _utils.getWidget)({\n        type: \"number\"\n      }, widget, widgets);\n      var option = options[selectedOption] || null;\n      var optionSchema;\n\n      if (option) {\n        // If the subschema doesn't declare a type, infer the type from the\n        // parent schema\n        optionSchema = option.type ? option : (0, _assign[\"default\"])({}, option, {\n          type: baseType\n        });\n      }\n\n      var enumOptions = options.map(function (option, index) {\n        return {\n          label: option.title || \"Option \".concat(index + 1),\n          value: index\n        };\n      });\n      return _react[\"default\"].createElement(\"div\", {\n        className: \"panel panel-default panel-body\"\n      }, _react[\"default\"].createElement(\"div\", {\n        className: \"form-group\"\n      }, _react[\"default\"].createElement(Widget, (0, _extends2[\"default\"])({\n        id: \"\".concat(idSchema.$id, \"_anyof_select\"),\n        schema: {\n          type: \"number\",\n          \"default\": 0\n        },\n        onChange: this.onOptionChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        value: selectedOption,\n        options: {\n          enumOptions: enumOptions\n        }\n      }, uiOptions))), option !== null && _react[\"default\"].createElement(_SchemaField, {\n        schema: optionSchema,\n        uiSchema: uiSchema,\n        errorSchema: errorSchema,\n        idSchema: idSchema,\n        idPrefix: idPrefix,\n        formData: formData,\n        onChange: onChange,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        registry: registry,\n        safeRenderCompletion: safeRenderCompletion,\n        disabled: disabled\n      }));\n    }\n  }]);\n  return AnyOfField;\n}(_react.Component);\n\nAnyOfField.defaultProps = {\n  disabled: false,\n  errorSchema: {},\n  idSchema: {},\n  uiSchema: {}\n};\n\nif (process.env.NODE_ENV !== \"production\") {\n  AnyOfField.propTypes = {\n    options: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].object).isRequired,\n    baseType: _propTypes[\"default\"].string,\n    uiSchema: _propTypes[\"default\"].object,\n    idSchema: _propTypes[\"default\"].object,\n    formData: _propTypes[\"default\"].any,\n    errorSchema: _propTypes[\"default\"].object,\n    registry: types.registry.isRequired\n  };\n}\n\nvar _default = AnyOfField;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}